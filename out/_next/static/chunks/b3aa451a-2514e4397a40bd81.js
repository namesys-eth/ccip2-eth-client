"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{79747:function(e,t,r){r.d(t,{A:function(){return Tt},C:function(){return q},D:function(){return L},E:function(){return W},I:function(){return Oe},N:function(){return n},V:function(){return We},_:function(){return M},a:function(){return x},b:function(){return G},c:function(){return At},d:function(){return ue},e:function(){return pt},f:function(){return le},g:function(){return K},h:function(){return Et},i:function(){return Nt},j:function(){return m},k:function(){return mt},l:function(){return Ke},m:function(){return wt},n:function(){return H},t:function(){return fe},v:function(){return _t}});var n,o,i,s,a,d,c,u,l,f,h,v,g,y,E,m,T,A,N,p,_,O,k,R,I,w=r(61744),b=r(16441),C=r(2593),S=r(9669),P=r.n(S);function M(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{d(n.next(e))}catch(t){i(t)}}function a(e){try{d(n.throw(e))}catch(t){i(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))}function F(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(e){return this instanceof D?(this.v=e,this):new D(e)}function U(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof D?Promise.resolve(r.value.v).then(d,c):u(i[0][2],r)}catch(n){u(i[0][3],n)}var r}function d(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function B(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=F(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}!function(e){e.ETH_MAINNET="eth-mainnet",e.ETH_ROPSTEN="eth-ropsten",e.ETH_GOERLI="eth-goerli",e.ETH_KOVAN="eth-kovan",e.ETH_RINKEBY="eth-rinkeby",e.ETH_SEPOLIA="eth-sepolia",e.OPT_MAINNET="opt-mainnet",e.OPT_KOVAN="opt-kovan",e.OPT_GOERLI="opt-goerli",e.ARB_MAINNET="arb-mainnet",e.ARB_RINKEBY="arb-rinkeby",e.ARB_GOERLI="arb-goerli",e.MATIC_MAINNET="polygon-mainnet",e.MATIC_MUMBAI="polygon-mumbai",e.ASTAR_MAINNET="astar-mainnet"}(n||(n={})),function(e){e.DEFAULT_TOKENS="DEFAULT_TOKENS",e.ERC20="erc20"}(o||(o={})),function(e){e.EXTERNAL="external",e.INTERNAL="internal",e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e.SPECIALNFT="specialnft"}(i||(i={})),function(e){e.ASCENDING="asc",e.DESCENDING="desc"}(s||(s={})),function(e){e.ERC721="ERC721",e.ERC1155="ERC1155",e.NO_SUPPORTED_NFT_STANDARD="NO_SUPPORTED_NFT_STANDARD",e.NOT_A_CONTRACT="NOT_A_CONTRACT",e.UNKNOWN="UNKNOWN"}(a||(a={})),function(e){e.Erc721TooManyOwners="Erc721TooManyOwners",e.Erc721TooManyTokens="Erc721TooManyTokens",e.Erc721DishonestTotalSupply="Erc721DishonestTotalSupply",e.MostlyHoneyPotOwners="MostlyHoneyPotOwners",e.OwnedByMostHoneyPots="OwnedByMostHoneyPots"}(d||(d={})),function(e){e.SPAM="SPAM",e.AIRDROPS="AIRDROPS"}(c||(c={})),function(e){e.SPAM="SPAM",e.AIRDROPS="AIRDROPS"}(u||(u={})),function(e){e.TRANSFERTIME="TRANSFERTIME"}(l||(l={})),function(e){e.TO="TO",e.FROM="FROM"}(f||(f={})),function(e){e.ASCENDING="asc",e.DESCENDING="desc"}(h||(h={})),function(e){e.SEAPORT="seaport",e.LOOKSRARE="looksrare",e.X2Y2="x2y2",e.WYVERN="wyvern",e.CRYPTOPUNKS="cryptopunks",e.UNKNOWN="unknown"}(v||(v={})),function(e){e.BUYER="buyer",e.SELLER="seller"}(g||(g={})),function(e){e.DOES_NOT_EXIST="does_not_exist",e.ALREADY_QUEUED="already_queued",e.IN_PROGRESS="in_progress",e.FINISHED="finished",e.QUEUED="queued",e.QUEUE_FAILED="queue_failed"}(y||(y={})),function(e){e.VERIFIED="verified",e.APPROVED="approved",e.REQUESTED="requested",e.NOT_REQUESTED="not_requested"}(E||(E={})),function(e){e.PENDING_TRANSACTIONS="alchemy_pendingTransactions",e.MINED_TRANSACTIONS="alchemy_minedTransactions"}(m||(m={})),function(e){e.NATIVE="NATIVE",e.ERC20="ERC20",e.ERC721="ERC721",e.ERC1155="ERC1155",e.SPECIAL_NFT="SPECIAL_NFT"}(T||(T={})),function(e){e.APPROVE="APPROVE",e.TRANSFER="TRANSFER"}(A||(A={})),function(e){e.ETHERSCAN="ETHERSCAN"}(N||(N={})),function(e){e.CREATE="CREATE",e.CALL="CALL",e.STATICCALL="STATICCALL",e.DELEGATECALL="DELEGATECALL"}(p||(p={})),function(e){e.UNSPECIFIED="TRANSACTION_JOB_STATUS_UNSPECIFIED",e.IN_PROGRESS="IN_PROGRESS",e.COMPLETE="COMPLETE",e.ABANDONED="ABANDONED"}(_||(_={})),function(e){e.V1="V1",e.V2="V2"}(O||(O={})),function(e){e.MINED_TRANSACTION="MINED_TRANSACTION",e.DROPPED_TRANSACTION="DROPPED_TRANSACTION",e.ADDRESS_ACTIVITY="ADDRESS_ACTIVITY",e.NFT_ACTIVITY="NFT_ACTIVITY",e.NFT_METADATA_UPDATE="NFT_METADATA_UPDATE",e.GRAPHQL="GRAPHQL"}(k||(k={})),function(e){e.PENDING="pending",e.LATEST="latest",e.SAFE="safe",e.FINALIZED="finalized",e.EARLIEST="earliest"}(R||(R={})),function(e){e.CALL_TRACER="callTracer",e.PRESTATE_TRACER="prestateTracer"}(I||(I={}));const L="demo",x=n.ETH_MAINNET;function K(e,t){return`https://${e}.g.alchemy.com/v2/${t}`}function G(e,t){return`wss://${e}.g.alchemy.com/v2/${t}`}var j;!function(e){e[e.BASE=0]="BASE",e[e.NFT=1]="NFT",e[e.WEBHOOK=2]="WEBHOOK"}(j||(j={}));const W={[n.ETH_MAINNET]:"mainnet",[n.ETH_ROPSTEN]:"ropsten",[n.ETH_GOERLI]:"goerli",[n.ETH_KOVAN]:"kovan",[n.ETH_RINKEBY]:"rinkeby",[n.ETH_SEPOLIA]:"sepolia",[n.OPT_MAINNET]:"optimism",[n.OPT_KOVAN]:"optimism-kovan",[n.OPT_GOERLI]:"optimism-goerli",[n.ARB_MAINNET]:"arbitrum",[n.ARB_RINKEBY]:"arbitrum-rinkeby",[n.ARB_GOERLI]:"arbitrum-goerli",[n.MATIC_MAINNET]:"matic",[n.MATIC_MUMBAI]:"maticmum",[n.ASTAR_MAINNET]:"astar-mainnet"},q={"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"astar-mainnet":{chainId:592,name:"astar-mainnet"},sepolia:{chainId:11155111,name:"sepolia"}};function H(){}class ${constructor(e){this.apiKey=(null===e||void 0===e?void 0:e.apiKey)||L,this.network=(null===e||void 0===e?void 0:e.network)||x,this.maxRetries=(null===e||void 0===e?void 0:e.maxRetries)||5,this.url=null===e||void 0===e?void 0:e.url,this.authToken=null===e||void 0===e?void 0:e.authToken,this.batchRequests=(null===e||void 0===e?void 0:e.batchRequests)||!1,this.requestTimeout=(null===e||void 0===e?void 0:e.requestTimeout)||0}_getRequestUrl(e){return void 0!==this.url?this.url:e===j.NFT?(t=this.network,r=this.apiKey,`https://${t}.g.alchemy.com/nft/v2/${r}`):e===j.WEBHOOK?"https://dashboard.alchemy.com/api":K(this.network,this.apiKey);var t,r}getProvider(){return this._baseAlchemyProvider||(this._baseAlchemyProvider=(()=>M(this,void 0,void 0,(function*(){const{AlchemyProvider:e}=yield r.e(94).then(r.bind(r,23094));return new e(this)})))()),this._baseAlchemyProvider}getWebSocketProvider(){return this._baseAlchemyWssProvider||(this._baseAlchemyWssProvider=(()=>M(this,void 0,void 0,(function*(){const{AlchemyWebSocketProvider:e}=yield r.e(241).then(r.bind(r,32241));return new e(this)})))()),this._baseAlchemyWssProvider}}let V=!1,z=!1;const Y={debug:1,default:2,info:2,warning:3,error:4,off:5};let Q=Y.default,X=null;const J=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Z,ee;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Z||(Z={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(ee||(ee={}));const te="0123456789abcdef";class re{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Y[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Q>Y[r]||console.log.apply(console,t)}debug(...e){this._log(re.levels.DEBUG,e)}info(...e){this._log(re.levels.INFO,e)}warn(...e){this._log(re.levels.WARNING,e)}makeError(e,t,r){if(z)return this.makeError("censored error",t,{});t||(t=re.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=te[t[e]>>4],r+=te[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(s){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push(`code=${t}`),n.push(`version=${this.version}`);const o=e;let i="";switch(t){case ee.NUMERIC_FAULT:{i="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":i+="-"+t;break;case"negative-power":case"negative-width":i+="-unsupported";break;case"unbound-bitwise-result":i+="-unbound-result"}break}case ee.CALL_EXCEPTION:case ee.INSUFFICIENT_FUNDS:case ee.MISSING_NEW:case ee.NONCE_EXPIRED:case ee.REPLACEMENT_UNDERPRICED:case ee.TRANSACTION_REPLACED:case ee.UNPREDICTABLE_GAS_LIMIT:i=t}i&&(e+=" [ See: https://links.ethers.org/v5-errors-"+i+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=o,s.code=t,Object.keys(r).forEach((function(e){s[e]=r[e]})),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,re.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){J&&this.throwError("platform missing String.prototype.normalize",re.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:J})}checkSafeUint53(e,t){"number"===typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,re.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,re.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,re.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,re.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",re.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",re.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",re.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return X||(X=new re("logger/5.7.0")),X}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",re.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),V){if(!e)return;this.globalLogger().throwError("error censorship permanent",re.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}z=!!e,V=!!t}static setLogLevel(e){const t=Y[e.toLowerCase()];null!=t?Q=t:re.globalLogger().warn("invalid log level - "+e)}static from(e){return new re(e)}}re.errors=ee,re.levels=Z;var ne=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{d(n.next(e))}catch(t){i(t)}}function a(e){try{d(n.throw(e))}catch(t){i(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};const oe=new re("properties/5.7.0");function ie(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function se(e){return ne(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))}));return(yield Promise.all(t)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})}))}const ae={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function de(e){if(void 0===e||null===e||ae[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;const r=Object.keys(e);for(let n=0;n<r.length;n++){let o=null;try{o=e[r[n]]}catch(t){continue}if(!de(o))return!1}return!0}return oe.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ce(e){if(de(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>ue(e))));if("object"===typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&ie(t,r,ue(n))}return t}return oe.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ue(e){return ce(e)}function le(e){return C.O$.from(e).toNumber()}function fe(e){return C.O$.from(e).toHexString()}function he(e){return"string"===typeof e?e:Number.isInteger(e)?fe(e):e.toString()}function ve(e){return{address:e.address,name:e.contractMetadata.name,symbol:e.contractMetadata.symbol,totalSupply:e.contractMetadata.totalSupply,tokenType:Te(e.contractMetadata.tokenType),openSea:_e(e.contractMetadata.openSea),contractDeployer:e.contractMetadata.contractDeployer,deployedBlockNumber:e.contractMetadata.deployedBlockNumber}}function ge(e,t){var r;return{contract:t?{address:t}:e.contract,tokenId:C.O$.from(e.id.tokenId).toString(),tokenType:Te(null===(r=e.id.tokenMetadata)||void 0===r?void 0:r.tokenType)}}function ye(e){var t,r,n,o,i,s,a,d;try{const c=Te(null===(t=e.id.tokenMetadata)||void 0===t?void 0:t.tokenType),u=function(e){if(!e)return;const{isSpam:t,classifications:r}=e;return{isSpam:"true"===t,classifications:r}}(e.spamInfo);return{contract:{address:e.contract.address,name:null===(r=e.contractMetadata)||void 0===r?void 0:r.name,symbol:null===(n=e.contractMetadata)||void 0===n?void 0:n.symbol,totalSupply:null===(o=e.contractMetadata)||void 0===o?void 0:o.totalSupply,tokenType:c,openSea:_e(null===(i=e.contractMetadata)||void 0===i?void 0:i.openSea),contractDeployer:null===(s=e.contractMetadata)||void 0===s?void 0:s.contractDeployer,deployedBlockNumber:null===(a=e.contractMetadata)||void 0===a?void 0:a.deployedBlockNumber},tokenId:(d=e.id.tokenId,C.O$.from(d).toString()),tokenType:c,title:e.title,description:Ae(e.description),timeLastUpdated:e.timeLastUpdated,metadataError:e.error,rawMetadata:e.metadata,tokenUri:Ne(e.tokenUri),media:pe(e.media),spamInfo:u}}catch(c){throw new Error("Error parsing the NFT response: "+c)}}function Ee(e){switch(e){case"looksrare":return v.LOOKSRARE;case"seaport":return v.SEAPORT;case"x2y2":return v.X2Y2;case"wyvern":return v.WYVERN;case"cryptopunks":return v.CRYPTOPUNKS;default:return v.UNKNOWN}}function me(e){switch(e.toLowerCase()){case"buyer":return g.BUYER;case"seller":return g.SELLER;default:throw new Error(`Unsupported NftSaleTakerType ${e}`)}}function Te(e){switch(e){case"erc721":case"ERC721":return a.ERC721;case"erc1155":case"ERC1155":return a.ERC1155;case"no_supported_nft_standard":case"NO_SUPPORTED_NFT_STANDARD":return a.NO_SUPPORTED_NFT_STANDARD;case"not_a_contract":case"NOT_A_CONTRACT":return a.NOT_A_CONTRACT;default:return a.UNKNOWN}}function Ae(e){return void 0===e?"":Array.isArray(e)||"object"!==typeof e?"string"===typeof e?e:e.join(" "):JSON.stringify(e)}function Ne(e){if(!e||0!==e.raw.length||0!=e.gateway.length)return e}function pe(e){return void 0===e?[]:e.filter((e=>void 0!==Ne(e)))}function _e(e){var t,r;if(void 0!==e)return{floorPrice:e.floorPrice,collectionName:e.collectionName,safelistRequestStatus:void 0!==e.safelistRequestStatus?(t=e.safelistRequestStatus,r=E,Object.values(r).includes(t)?t:void 0):void 0,imageUrl:e.imageUrl,description:e.description,externalUrl:e.externalUrl,twitterUsername:e.twitterUsername,discordUrl:e.discordUrl,lastIngestedAt:e.lastIngestedAt}}const Oe="undefined"!==typeof window&&null!==window;function ke(e){if(null!==e){if("object"===typeof e)for(const t in e)e[t]=ke(e[t]);return e}}function Re(e,t,r="getAssetTransfers"){return M(this,void 0,void 0,(function*(){const n=yield e.getProvider();return t.fromAddress&&(t.fromAddress=yield n._getAddress(t.fromAddress)),t.toAddress&&(t.toAddress=yield n._getAddress(t.toAddress)),n._send("alchemy_getAssetTransfers",[Object.assign(Object.assign({},t),{fromBlock:null!=t.fromBlock?he(t.fromBlock):void 0,toBlock:null!=t.toBlock?he(t.toBlock):void 0,maxCount:null!=t.maxCount?fe(t.maxCount):void 0})],r)}))}function Ie(e,t,r="getTransactionReceipts"){return M(this,void 0,void 0,(function*(){return(yield e.getProvider())._send("alchemy_getTransactionReceipts",[t],r)}))}function we(e,t){return M(this,void 0,void 0,(function*(){const r=yield e.getProvider();yield r.getNetwork();const n=yield se({filter:be(e,t)}),o=yield r.send("eth_getLogs",[n.filter]);return o.forEach((e=>{null==e.removed&&(e.removed=!1)})),(i=r.formatter.filterLog.bind(r.formatter),function(e){if(!Array.isArray(e))throw new Error("not an array");const t=[];return e.forEach((e=>{t.push(i(e))})),t})(o);var i}))}function be(e,t){return M(this,void 0,void 0,(function*(){const r=yield e.getProvider(),n=yield t;let o={};return["blockHash","topics"].forEach((e=>{null!=n[e]&&(o[e]=n[e])})),["fromBlock","toBlock"].forEach((e=>{null!=n[e]&&(o[e]=r._getBlockTag(n[e]))})),o=r.formatter.filter(yield se(o)),Array.isArray(n.address)?o.address=yield Promise.all(n.address.map((e=>M(this,void 0,void 0,(function*(){return r._getAddress(e)}))))):null!=n.address&&(o.address=yield r._getAddress(n.address)),o}))}class Ce{constructor(e){this.config=e}getBalance(e,t){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getBalance(e,t)}))}getCode(e,t){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getCode(e,t)}))}getStorageAt(e,t,r){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getStorageAt(e,t,r)}))}getTransactionCount(e,t){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getTransactionCount(e,t)}))}getBlock(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getBlock(e)}))}getBlockWithTransactions(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getBlockWithTransactions(e)}))}getNetwork(){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getNetwork()}))}getBlockNumber(){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getBlockNumber()}))}getGasPrice(){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getGasPrice()}))}getFeeData(){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getFeeData()}))}ready(){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).ready}))}call(e,t){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).call(e,t)}))}estimateGas(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).estimateGas(e)}))}getTransaction(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getTransaction(e)}))}getTransactionReceipt(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getTransactionReceipt(e)}))}sendTransaction(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).sendTransaction(e)}))}waitForTransaction(e,t,r){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).waitForTransaction(e,t,r)}))}getLogs(e){return M(this,void 0,void 0,(function*(){return we(this.config,e)}))}send(e,t){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).send(e,t)}))}findContractDeployer(e){var t;return M(this,void 0,void 0,(function*(){const r=yield this.config.getProvider(),n=yield r.getBlockNumber();if("0x"===(yield r.getCode(e,n)))throw new Error(`Contract '${e}' does not exist`);const o=yield Se(0,n+1,e,this.config),i=yield Ie(this.config,{blockNumber:fe(o)},"findContractDeployer"),s=null===(t=i.receipts)||void 0===t?void 0:t.find((t=>t.contractAddress===e.toLowerCase()));return{deployerAddress:null===s||void 0===s?void 0:s.from,blockNumber:o}}))}getTokenBalances(e,t){return M(this,void 0,void 0,(function*(){const r=yield this.config.getProvider(),n=yield r._getAddress(e);if(Array.isArray(t)){if(t.length>1500)throw new Error("You cannot pass in more than 1500 contract addresses to getTokenBalances()");if(0===t.length)throw new Error("getTokenBalances() requires at least one contractAddress when using an array");return r._send("alchemy_getTokenBalances",[n,t],"getTokenBalances")}{const e=[n,void 0===t?o.ERC20:t.type];return(null===t||void 0===t?void 0:t.type)===o.ERC20&&t.pageKey&&e.push({pageKey:t.pageKey}),r._send("alchemy_getTokenBalances",e,"getTokenBalances")}}))}getTokensForOwner(e,t){var r;return M(this,void 0,void 0,(function*(){const n=yield this.config.getProvider(),i=[yield n._getAddress(e),null!==(r=null===t||void 0===t?void 0:t.contractAddresses)&&void 0!==r?r:o.ERC20];(null===t||void 0===t?void 0:t.pageKey)&&i.push({pageKey:t.pageKey});const s=yield n._send("alchemy_getTokenBalances",i,"getTokensForOwner"),a=s.tokenBalances.map((e=>({contractAddress:e.contractAddress,rawBalance:C.O$.from(e.tokenBalance).toString()}))),d=yield Promise.all(s.tokenBalances.map((e=>n._send("alchemy_getTokenMetadata",[e.contractAddress],"getTokensForOwner",!0))));return{tokens:a.map(((e,t)=>Object.assign(Object.assign(Object.assign({},e),d[t]),{balance:null!==d[t].decimals?(0,w.formatUnits)(e.rawBalance,d[t].decimals):void 0}))).map(ke),pageKey:s.pageKey}}))}getTokenMetadata(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider())._send("alchemy_getTokenMetadata",[e],"getTokenMetadata")}))}getAssetTransfers(e){return M(this,void 0,void 0,(function*(){return Re(this.config,e)}))}getTransactionReceipts(e){return M(this,void 0,void 0,(function*(){return Ie(this.config,e)}))}resolveName(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).resolveName(e)}))}lookupAddress(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).lookupAddress(e)}))}}function Se(e,t,r,n){return M(this,void 0,void 0,(function*(){if(e>=t)return t;const o=Math.floor((e+t)/2),i=yield n.getProvider();return"0x"===(yield i.getCode(r,o))?Se(o+1,t,r,n):Se(e,o,r,n)}))}class Pe{constructor(e){this.config=e}traceCall(e,t,r){return M(this,void 0,void 0,(function*(){const n=yield this.config.getProvider(),o=[e,t,Me(r)];return n._send("debug_traceCall",o,"traceCall")}))}traceTransaction(e,t,r){return M(this,void 0,void 0,(function*(){const n=yield this.config.getProvider(),o=[e,Me(t,r)];return n._send("debug_traceTransaction",o,"traceTransaction")}))}traceBlock(e,t){return M(this,void 0,void 0,(function*(){const r=yield this.config.getProvider();let n,o;if((0,b.isHexString)(e,32))n="debug_traceBlockByHash",o=[e,Me(t)];else{n="debug_traceBlockByNumber";o=["number"===typeof e?(0,b.hexStripZeros)((0,b.hexValue)(e)):e,Me(t)]}return r._send(n,o,"traceBlock")}))}}function Me(e,t){return Object.assign({tracer:e.type},void 0!==e.onlyTopCall&&{tracerConfig:{onlyTopCall:e.onlyTopCall,timeout:t}})}function Fe(e){if(e===a.ERC1155||e===a.ERC721)return e}var De;!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.SILENT=4]="SILENT"}(De||(De={}));De.DEBUG,De.INFO,De.WARN,De.ERROR,De.SILENT;const Ue={[De.DEBUG]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Be=De.INFO;function Le(e,...t){je.debug(e,t)}function xe(e,...t){je.info(e,t)}function Ke(e,...t){je.warn(e,t)}function Ge(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}const je=new class{constructor(){this._logLevel=Be}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}debug(...e){this._log(De.DEBUG,...e)}info(...e){this._log(De.INFO,...e)}warn(...e){this._log(De.WARN,...e)}error(...e){this._log(De.ERROR,...e)}_log(e,...t){if(e<this._logLevel)return;const r=(new Date).toISOString(),n=Ue[e];if(!n)throw new Error(`Logger received an invalid logLevel (value: ${e})`);console[n](`[${r}] Alchemy:`,...t.map(Ge))}},We="2.7.0";function qe(e,t,r,n,o){var i;const s=e+"/"+t,a=Object.assign(Object.assign({},o),{headers:Object.assign(Object.assign(Object.assign({},null===o||void 0===o?void 0:o.headers),!Oe&&{"Accept-Encoding":"gzip"}),{"Alchemy-Ethers-Sdk-Version":We,"Alchemy-Ethers-Sdk-Method":r}),method:null!==(i=null===o||void 0===o?void 0:o.method)&&void 0!==i?i:"GET",url:s,params:n});return P()(a)}class He{constructor(e=5){this.maxAttempts=e,this.initialDelayMs=1e3,this.backoffMultiplier=1.5,this.maxDelayMs=3e4,this.numAttempts=0,this.currentDelayMs=0,this.isInBackoff=!1}backoff(){if(this.numAttempts>=this.maxAttempts)return Promise.reject(new Error(`Exceeded maximum number of attempts: ${this.maxAttempts}`));if(this.isInBackoff)return Promise.reject(new Error("A backoff operation is already in progress"));const e=this.withJitterMs(this.currentDelayMs);return e>0&&Le("ExponentialBackoff.backoff",`Backing off for ${e}ms`),this.currentDelayMs*=this.backoffMultiplier,this.currentDelayMs=Math.max(this.currentDelayMs,this.initialDelayMs),this.currentDelayMs=Math.min(this.currentDelayMs,this.maxDelayMs),this.numAttempts+=1,new Promise((t=>{this.isInBackoff=!0,setTimeout((()=>{this.isInBackoff=!1,t()}),e)}))}withJitterMs(e){return Math.min(e+(Math.random()-.5)*e,this.maxDelayMs)}}function $e(e,t,r,n,o,i){return M(this,void 0,void 0,(function*(){let s;const a=new He(e.maxRetries);for(let c=0;c<e.maxRetries+1;c++)try{void 0!==s&&xe("requestHttp",`Retrying after error: ${s.message}`);try{yield a.backoff()}catch(d){break}const c=yield qe(e._getRequestUrl(t),r,n,o,Object.assign(Object.assign({},i),{timeout:e.requestTimeout}));if(200===c.status)return Le(r,`Successful request: ${r}`),c.data;xe(r,`Request failed: ${r}, ${c.status}, ${c.data}`),s=new Error(c.status+": "+c.data)}catch(d){if(!P().isAxiosError(d)||void 0===d.response)throw d;if(s=new Error(d.response.status+": "+d.response.data),!Ve(d,t))break}return Promise.reject(s)}))}function Ve(e,t){const r=t===j.WEBHOOK?[429,500]:[429];return void 0!==e.response&&r.includes(e.response.status)}function ze(e,t,r,n,o,i,s){return U(this,arguments,(function*(){let a=!0;const d=Object.assign({},s);for(;a;){const s=yield D($e(e,t,r,n,d));yield yield D(s),void 0!==s[i]?d[o]=s[i]:a=!1}}))}function Ye(e,t,r,n,o="getNftMetadata"){return M(this,void 0,void 0,(function*(){return ye(yield $e(e,j.NFT,"getNFTMetadata",o,{contractAddress:t,tokenId:C.O$.from(r).toString(),tokenType:Fe(null===n||void 0===n?void 0:n.tokenType),tokenUriTimeoutInMs:null===n||void 0===n?void 0:n.tokenUriTimeoutInMs,refreshCache:null===n||void 0===n?void 0:n.refreshCache}))}))}function Qe(e,t,r){return M(this,void 0,void 0,(function*(){const n={tokens:t,tokenUriTimeoutInMs:null===r||void 0===r?void 0:r.tokenUriTimeoutInMs,refreshCache:null===r||void 0===r?void 0:r.refreshCache};return(yield $e(e,j.NFT,"getNFTMetadataBatch","getNftMetadataBatch",{},{method:"POST",data:n})).map(ye)}))}function Xe(e,t,r,n="getNftsForOwner"){return M(this,void 0,void 0,(function*(){const o=st(null===r||void 0===r?void 0:r.omitMetadata),i=yield $e(e,j.NFT,"getNFTs",n,{contractAddresses:null===r||void 0===r?void 0:r.contractAddresses,pageKey:null===r||void 0===r?void 0:r.pageKey,filters:null===r||void 0===r?void 0:r.excludeFilters,excludeFilters:null===r||void 0===r?void 0:r.excludeFilters,includeFilters:null===r||void 0===r?void 0:r.includeFilters,owner:t,pageSize:null===r||void 0===r?void 0:r.pageSize,withMetadata:o,tokenUriTimeoutInMs:null===r||void 0===r?void 0:r.tokenUriTimeoutInMs,orderBy:null===r||void 0===r?void 0:r.orderBy});return{ownedNfts:i.ownedNfts.map((e=>Object.assign(Object.assign({},rt(e)),{balance:parseInt(e.balance)}))),pageKey:i.pageKey,totalCount:i.totalCount,blockHash:i.blockHash}}))}function Je(e,t,r,n="getContractsForOwner"){return M(this,void 0,void 0,(function*(){const o=yield $e(e,j.NFT,"getContractsForOwner",n,{owner:t,excludeFilters:null===r||void 0===r?void 0:r.excludeFilters,includeFilters:null===r||void 0===r?void 0:r.includeFilters,pageKey:null===r||void 0===r?void 0:r.pageKey,pageSize:null===r||void 0===r?void 0:r.pageSize,orderBy:null===r||void 0===r?void 0:r.orderBy});return{pageKey:null===(i=o)||void 0===i?void 0:i.pageKey,totalCount:i.totalCount,contracts:i.contracts.map((e=>({address:e.address,totalSupply:e.totalSupply,isSpam:e.isSpam,media:e.media,numDistinctTokensOwned:e.numDistinctTokensOwned,tokenId:e.tokenId,totalBalance:e.totalBalance,name:e.name,title:e.title,openSea:_e(null===e||void 0===e?void 0:e.opensea),symbol:null===e||void 0===e?void 0:e.symbol,tokenType:Te(null===e||void 0===e?void 0:e.tokenType),contractDeployer:e.contractDeployer,deployedBlockNumber:e.deployedBlockNumber})))};var i}))}function Ze(e){switch(e){case a.ERC721:return[i.ERC721];case a.ERC1155:return[i.ERC1155];default:return[i.ERC721,i.ERC1155,i.SPECIALNFT]}}function et(e,t={},r="getNftSales"){return M(this,void 0,void 0,(function*(){const n=Object.assign({},t),o=yield $e(e,j.NFT,"getNFTSales",r,{fromBlock:null===n||void 0===n?void 0:n.fromBlock,toBlock:null===n||void 0===n?void 0:n.toBlock,order:null===n||void 0===n?void 0:n.order,marketplace:null===n||void 0===n?void 0:n.marketplace,contractAddress:null===n||void 0===n?void 0:n.contractAddress,tokenId:(null===n||void 0===n?void 0:n.tokenId)?C.O$.from(null===n||void 0===n?void 0:n.tokenId).toString():void 0,sellerAddress:null===n||void 0===n?void 0:n.sellerAddress,buyerAddress:null===n||void 0===n?void 0:n.buyerAddress,taker:null===n||void 0===n?void 0:n.taker,limit:null===n||void 0===n?void 0:n.limit,pageKey:null===n||void 0===n?void 0:n.pageKey});return{pageKey:null===(i=o)||void 0===i?void 0:i.pageKey,nftSales:i.nftSales.map((e=>({marketplace:Ee(e.marketplace),contractAddress:e.contractAddress,tokenId:e.tokenId,quantity:e.quantity,buyerAddress:e.buyerAddress,sellerAddress:e.sellerAddress,taker:me(e.taker),sellerFee:null===e||void 0===e?void 0:e.sellerFee,marketplaceFee:null===e||void 0===e?void 0:e.protocolFee,protocolFee:null===e||void 0===e?void 0:e.protocolFee,royaltyFee:null===e||void 0===e?void 0:e.royaltyFee,blockNumber:null===e||void 0===e?void 0:e.blockNumber,logIndex:e.logIndex,bundleIndex:e.bundleIndex,transactionHash:e.transactionHash})))};var i}))}function tt(e,t,r,n="refreshNftMetadata"){return M(this,void 0,void 0,(function*(){const o=C.O$.from(r).toString(),i=yield Ye(e,t,o,void 0,n),s=yield function(e,t,r,n){return M(this,void 0,void 0,(function*(){return ye(yield $e(e,j.NFT,"getNFTMetadata",n,{contractAddress:t,tokenId:C.O$.from(r).toString(),refreshCache:!0}))}))}(e,t,o,n);return i.timeLastUpdated!==s.timeLastUpdated}))}function rt(e){return ot(e)?ye(e):ge(e)}function nt(e,t){return ot(e)?ye(e):ge(e,t)}function ot(e){return void 0!==e.title}function it(e,t){return M(this,void 0,void 0,(function*(){const r=t.transfers.filter((e=>null!==e.rawContract.address)).flatMap((e=>{var t;const r=function(e){return e.category===i.ERC1155?function(e){return e.erc1155Metadata.map((t=>({contractAddress:e.rawContract.address,tokenId:t.tokenId,tokenType:a.ERC1155})))}(e):[{contractAddress:e.rawContract.address,tokenId:e.tokenId,tokenType:e.category===i.ERC721?a.ERC721:void 0}]}(e),n={from:e.from,to:null!==(t=e.to)&&void 0!==t?t:void 0,transactionHash:e.hash,blockNumber:e.blockNum};return r.map((e=>({metadata:n,token:e})))}));if(0===r.length)return{nfts:[]};return{nfts:(yield Qe(e,r.map((e=>e.token)))).map(((e,t)=>Object.assign(Object.assign({},e),r[t].metadata))),pageKey:t.pageKey}}))}function st(e){return void 0===e||!e}function at(e){switch(e){case"does_not_exist":return y.DOES_NOT_EXIST;case"already_queued":return y.ALREADY_QUEUED;case"in_progress":return y.IN_PROGRESS;case"finished":return y.FINISHED;case"queued":return y.QUEUED;case"queue_failed":return y.QUEUE_FAILED;default:throw new Error("Unknown reingestion state: "+e)}}class dt{constructor(e){this.config=e}getNftMetadata(e,t,r,n){let o;return o="object"===typeof r?{tokenType:r.tokenType,tokenUriTimeoutInMs:r.tokenUriTimeoutInMs,refreshCache:r.refreshCache}:{tokenType:r,tokenUriTimeoutInMs:n},Ye(this.config,e,t,o)}getNftMetadataBatch(e,t){return Qe(this.config,e,t)}getContractMetadata(e){return function(e,t,r="getContractMetadata"){return M(this,void 0,void 0,(function*(){return ve(yield $e(e,j.NFT,"getContractMetadata",r,{contractAddress:t}))}))}(this.config,e)}getContractMetadataBatch(e){return function(e,t){return M(this,void 0,void 0,(function*(){return(yield $e(e,j.NFT,"getContractMetadataBatch","getContractMetadataBatch",{},{method:"POST",data:{contractAddresses:t}})).map(ve)}))}(this.config,e)}getNftsForOwnerIterator(e,t){return function(e,t,r,n="getNftsForOwnerIterator"){return U(this,arguments,(function*(){var o,i;const s=st(null===r||void 0===r?void 0:r.omitMetadata);try{for(var a,d=B(ze(e,j.NFT,"getNFTs",n,"pageKey","pageKey",{contractAddresses:null===r||void 0===r?void 0:r.contractAddresses,pageKey:null===r||void 0===r?void 0:r.pageKey,filters:null===r||void 0===r?void 0:r.excludeFilters,owner:t,withMetadata:s}));!(a=yield D(d.next())).done;){const e=a.value;for(const t of e.ownedNfts)yield yield D(Object.assign(Object.assign({},rt(t)),{balance:parseInt(t.balance)}))}}catch(c){o={error:c}}finally{try{a&&!a.done&&(i=d.return)&&(yield D(i.call(d)))}finally{if(o)throw o.error}}}))}(this.config,e,t)}getNftsForOwner(e,t){return Xe(this.config,e,t)}getNftsForContract(e,t){return function(e,t,r,n="getNftsForContract"){var o;return M(this,void 0,void 0,(function*(){const i=st(null===r||void 0===r?void 0:r.omitMetadata),s=yield $e(e,j.NFT,"getNFTsForCollection",n,{contractAddress:t,startToken:null===r||void 0===r?void 0:r.pageKey,withMetadata:i,limit:null!==(o=null===r||void 0===r?void 0:r.pageSize)&&void 0!==o?o:void 0,tokenUriTimeoutInMs:null===r||void 0===r?void 0:r.tokenUriTimeoutInMs});return{nfts:s.nfts.map((e=>nt(e,t))),pageKey:s.nextToken}}))}(this.config,e,t)}getNftsForContractIterator(e,t){return function(e,t,r,n="getNftsForContractIterator"){return U(this,arguments,(function*(){var o,i;const s=st(null===r||void 0===r?void 0:r.omitMetadata);try{for(var a,d=B(ze(e,j.NFT,"getNFTsForCollection",n,"startToken","nextToken",{contractAddress:t,startToken:null===r||void 0===r?void 0:r.pageKey,withMetadata:s}));!(a=yield D(d.next())).done;){const e=a.value;for(const r of e.nfts)yield yield D(nt(r,t))}}catch(c){o={error:c}}finally{try{a&&!a.done&&(i=d.return)&&(yield D(i.call(d)))}finally{if(o)throw o.error}}}))}(this.config,e,t)}getOwnersForContract(e,t){return function(e,t,r,n="getOwnersForContract"){return M(this,void 0,void 0,(function*(){const o=yield $e(e,j.NFT,"getOwnersForCollection",n,Object.assign(Object.assign({},r),{contractAddress:t}));return Object.assign({owners:o.ownerAddresses},void 0!==o.pageKey&&{pageKey:o.pageKey})}))}(this.config,e,t)}getOwnersForNft(e,t,r){return function(e,t,r,n,o="getOwnersForNft"){return M(this,void 0,void 0,(function*(){return $e(e,j.NFT,"getOwnersForToken",o,Object.assign({contractAddress:t,tokenId:C.O$.from(r).toString()},n))}))}(this.config,e,t,r)}getContractsForOwner(e,t){return Je(this.config,e,t)}getTransfersForOwner(e,t,r){return function(e,t,r,n){return M(this,void 0,void 0,(function*(){const o=yield e.getProvider(),i=yield o._getAddress(t),s=Ze(null===n||void 0===n?void 0:n.tokenType),a={fromBlock:"0x0",excludeZeroValue:!0,contractAddresses:null===n||void 0===n?void 0:n.contractAddresses,category:s,maxCount:100,pageKey:null===n||void 0===n?void 0:n.pageKey};r===f.TO?a.toAddress=i:a.fromAddress=i;const d=yield Re(e,a,"getTransfersForOwner");return it(e,d)}))}(this.config,e,t,r)}getTransfersForContract(e,t){return function(e,t,r){return M(this,void 0,void 0,(function*(){const n=[i.ERC721,i.ERC1155,i.SPECIALNFT],o=yield e.getProvider(),s={fromBlock:(null===r||void 0===r?void 0:r.fromBlock)?o.formatter.blockTag(yield o._getBlockTag(r.fromBlock)):"0x0",toBlock:(null===r||void 0===r?void 0:r.toBlock)?o.formatter.blockTag(yield o._getBlockTag(r.toBlock)):void 0,excludeZeroValue:!0,contractAddresses:[t],order:null===r||void 0===r?void 0:r.order,category:n,maxCount:100,pageKey:null===r||void 0===r?void 0:r.pageKey},a=yield Re(e,s,"getTransfersForContract");return it(e,a)}))}(this.config,e,t)}getMintedNfts(e,t){return M(this,void 0,void 0,(function*(){return function(e,t,r){return M(this,void 0,void 0,(function*(){const n=yield e.getProvider(),o=yield n._getAddress(t),i=Ze(null===r||void 0===r?void 0:r.tokenType),s={fromBlock:"0x0",fromAddress:"0x0000000000000000000000000000000000000000",toAddress:o,excludeZeroValue:!0,contractAddresses:null===r||void 0===r?void 0:r.contractAddresses,category:i,maxCount:100,pageKey:null===r||void 0===r?void 0:r.pageKey},a=yield Re(e,s,"getMintedNfts");return it(e,a)}))}(this.config,e,t)}))}checkNftOwnership(e,t){return function(e,t,r,n="checkNftOwnership"){return M(this,void 0,void 0,(function*(){if(0===r.length)throw new Error("Must provide at least one contract address");return(yield Xe(e,t,{contractAddresses:r,omitMetadata:!0},n)).ownedNfts.length>0}))}(this.config,e,t)}verifyNftOwnership(e,t){return function(e,t,r,n="verifyNftOwnership"){return M(this,void 0,void 0,(function*(){if("string"===typeof r)return(yield Xe(e,t,{contractAddresses:[r],omitMetadata:!0},n)).ownedNfts.length>0;{if(0===r.length)throw new Error("Must provide at least one contract address");const o=yield Xe(e,t,{contractAddresses:r,omitMetadata:!0},n),i=r.reduce(((e,t)=>(e[t]=!1,e)),{});for(const e of o.ownedNfts)i[e.contract.address]=!0;return i}}))}(this.config,e,t)}isSpamContract(e){return function(e,t,r="isSpamContract"){return M(this,void 0,void 0,(function*(){return $e(e,j.NFT,"isSpamContract",r,{contractAddress:t})}))}(this.config,e)}getSpamContracts(){return function(e,t="getSpamContracts"){return M(this,void 0,void 0,(function*(){return $e(e,j.NFT,"getSpamContracts",t,void 0)}))}(this.config)}getFloorPrice(e){return function(e,t,r="getFloorPrice"){return M(this,void 0,void 0,(function*(){return $e(e,j.NFT,"getFloorPrice",r,{contractAddress:t})}))}(this.config,e)}getNftSales(e){return et(this.config,e)}computeRarity(e,t){return function(e,t,r,n="computeRarity"){return M(this,void 0,void 0,(function*(){return(yield $e(e,j.NFT,"computeRarity",n,{contractAddress:t,tokenId:C.O$.from(r).toString()})).map((({prevalence:e,trait_type:t,value:r})=>({prevalence:e,traitType:t,value:r})))}))}(this.config,e,t)}searchContractMetadata(e){return function(e,t,r="searchContractMetadata"){return M(this,void 0,void 0,(function*(){return(yield $e(e,j.NFT,"searchContractMetadata",r,{query:t})).map(ve)}))}(this.config,e)}summarizeNftAttributes(e){return function(e,t,r="summarizeNftAttributes"){return M(this,void 0,void 0,(function*(){return $e(e,j.NFT,"summarizeNftAttributes",r,{contractAddress:t})}))}(this.config,e)}refreshNftMetadata(e,t){return tt(this.config,e,t)}refreshContract(e){return function(e,t,r="refreshContract"){return M(this,void 0,void 0,(function*(){const n=yield $e(e,j.NFT,"reingestContract",r,{contractAddress:t});return{contractAddress:n.contractAddress,refreshState:at(n.reingestionState),progress:n.progress}}))}(this.config,e)}}class ct{constructor(e){this.config=e}getAllWebhooks(){return M(this,void 0,void 0,(function*(){this.verifyConfig();const e=yield this.sendWebhookRequest("team-webhooks","getAllWebhooks",{});return{webhooks:ft(e),totalCount:e.data.length}}))}getAddresses(e,t){return M(this,void 0,void 0,(function*(){this.verifyConfig();const r="string"===typeof e?e:e.id;return function(e){return{addresses:e.data,totalCount:e.pagination.total_count,pageKey:e.pagination.cursors.after}}(yield this.sendWebhookRequest("webhook-addresses","getAddresses",{webhook_id:r,limit:null===t||void 0===t?void 0:t.limit,after:null===t||void 0===t?void 0:t.pageKey}))}))}getGraphqlQuery(e){return M(this,void 0,void 0,(function*(){this.verifyConfig();const t="string"===typeof e?e:e.id;return function(e){return{graphqlQuery:e.data.graphql_query}}(yield this.sendWebhookRequest("dashboard-webhook-graphql-query","getGraphqlQuery",{webhook_id:t}))}))}getNftFilters(e,t){return M(this,void 0,void 0,(function*(){this.verifyConfig();const r="string"===typeof e?e:e.id;return function(e){return{filters:e.data.map((e=>e.token_id?{contractAddress:e.contract_address,tokenId:C.O$.from(e.token_id).toString()}:{contractAddress:e.contract_address})),totalCount:e.pagination.total_count,pageKey:e.pagination.cursors.after}}(yield this.sendWebhookRequest("webhook-nft-filters","getNftFilters",{webhook_id:r,limit:null===t||void 0===t?void 0:t.limit,after:null===t||void 0===t?void 0:t.pageKey}))}))}updateWebhook(e,t){return M(this,void 0,void 0,(function*(){const r="string"===typeof e?e:e.id;let n,o,i,s;if("isActive"in t)n="update-webhook",o="updateWebhook",i="PUT",s={webhook_id:r,is_active:t.isActive};else if("addFilters"in t||"removeFilters"in t)n="update-webhook-nft-filters",o="updateWebhookNftFilters",i="PATCH",s={webhook_id:r,nft_filters_to_add:t.addFilters?t.addFilters.map(vt):[],nft_filters_to_remove:t.removeFilters?t.removeFilters.map(vt):[]};else if("addMetadataFilters"in t||"removeMetadataFilters"in t)n="update-webhook-nft-metadata-filters",o="updateWebhookNftMetadataFilters",i="PATCH",s={webhook_id:r,nft_metadata_filters_to_add:t.addMetadataFilters?t.addMetadataFilters.map(vt):[],nft_metadata_filters_to_remove:t.removeMetadataFilters?t.removeMetadataFilters.map(vt):[]};else if("addAddresses"in t||"removeAddresses"in t)n="update-webhook-addresses",o="webhook:updateWebhookAddresses",i="PATCH",s={webhook_id:r,addresses_to_add:yield this.resolveAddresses(t.addAddresses),addresses_to_remove:yield this.resolveAddresses(t.removeAddresses)};else{if(!("newAddresses"in t))throw new Error("Invalid `update` param passed into `updateWebhook`");n="update-webhook-addresses",o="webhook:updateWebhookAddress",i="PUT",s={webhook_id:r,addresses:yield this.resolveAddresses(t.newAddresses)}}yield this.sendWebhookRequest(n,o,{},{method:i,data:s})}))}createWebhook(e,t,r){return M(this,void 0,void 0,(function*(){let n;if(t===k.MINED_TRANSACTION||t===k.DROPPED_TRANSACTION){if(!("appId"in r))throw new Error("Transaction Webhooks require an app id.");n=r.appId}let o,i,s,a=lt.get(this.config.network);if(t===k.NFT_ACTIVITY||t===k.NFT_METADATA_UPDATE){if(!("filters"in r)||0===r.filters.length)throw new Error("Nft Activity Webhooks require a non-empty array input.");a=r.network?lt.get(r.network):a;const e=r.filters.map((e=>e.tokenId?{contract_address:e.contractAddress,token_id:C.O$.from(e.tokenId).toString()}:{contract_address:e.contractAddress}));o=t===k.NFT_ACTIVITY?{nft_filters:e}:{nft_metadata_filters:e}}else if(t===k.ADDRESS_ACTIVITY){if(void 0===r||!("addresses"in r)||0===r.addresses.length)throw new Error("Address Activity Webhooks require a non-empty array input.");a=r.network?lt.get(r.network):a,i=yield this.resolveAddresses(r.addresses)}else if(t==k.GRAPHQL){if(void 0===r||!("graphqlQuery"in r)||0===r.graphqlQuery.length)throw new Error("Custom Webhooks require a non-empty graphql query.");a=r.network?lt.get(r.network):a,s=r.graphqlQuery}const d=Object.assign(Object.assign(Object.assign(Object.assign({network:a,webhook_type:t,webhook_url:e},n&&{app_id:n}),o),i&&{addresses:i}),s&&{graphql_query:s});return ht((yield this.sendWebhookRequest("create-webhook","createWebhook",{},{method:"POST",data:d})).data)}))}deleteWebhook(e){return M(this,void 0,void 0,(function*(){this.verifyConfig();const t="string"===typeof e?e:e.id;if("message"in(yield this.sendWebhookRequest("delete-webhook","deleteWebhook",{webhook_id:t},{method:"DELETE"})))throw new Error(`Webhook not found. Failed to delete webhook: ${t}`)}))}verifyConfig(){if(void 0===this.config.authToken)throw new Error("Using the Notify API requires setting the Alchemy Auth Token in the settings object when initializing Alchemy.")}sendWebhookRequest(e,t,r,n){return $e(this.config,j.WEBHOOK,e,t,r,Object.assign(Object.assign({},n),{headers:Object.assign({"X-Alchemy-Token":this.config.authToken},null===n||void 0===n?void 0:n.headers)}))}resolveAddresses(e){return M(this,void 0,void 0,(function*(){if(void 0===e)return[];const t=[],r=yield this.config.getProvider();for(const n of e){const e=yield r.resolveName(n);if(null===e)throw new Error(`Unable to resolve the ENS address: ${n}`);t.push(e)}return t}))}}const ut={ETH_MAINNET:n.ETH_MAINNET,ETH_GOERLI:n.ETH_GOERLI,ETH_ROPSTEN:n.ETH_ROPSTEN,ETH_RINKEBY:n.ETH_RINKEBY,ETH_KOVAN:n.ETH_KOVAN,MATIC_MAINNET:n.MATIC_MAINNET,MATIC_MUMBAI:n.MATIC_MUMBAI,ARB_MAINNET:n.ARB_MAINNET,ARB_RINKEBY:n.ARB_RINKEBY,OPT_MAINNET:n.OPT_MAINNET,OPT_KOVAN:n.OPT_KOVAN},lt=Object.keys(n).reduce(((e,t)=>(t in ut&&e.set(ut[t],t),e)),new Map);function ft(e){return e.data.map(ht)}function ht(e){return Object.assign({id:e.id,network:ut[e.network],type:e.webhook_type,url:e.webhook_url,isActive:e.is_active,timeCreated:new Date(e.time_created).toISOString(),signingKey:e.signing_key,version:e.version},void 0!==e.app_id&&{appId:e.app_id})}function vt(e){return e.tokenId?{contract_address:e.contractAddress,token_id:C.O$.from(e.tokenId).toString()}:{contract_address:e.contractAddress}}const gt=[.9,1,1.1,1.2,1.3];class yt{constructor(e){this.config=e}sendPrivateTransaction(e,t,r){return M(this,void 0,void 0,(function*(){const n=yield this.config.getProvider(),o=t?fe(t):void 0;return n._send("eth_sendPrivateTransaction",[{tx:e,maxBlockNumber:o,preferences:r}],"sendPrivateTransaction")}))}cancelPrivateTransaction(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider())._send("eth_cancelPrivateTransaction",[{txHash:e}],"cancelPrivateTransaction")}))}simulateAssetChangesBundle(e,t){return M(this,void 0,void 0,(function*(){const r=yield this.config.getProvider(),n=void 0!==t?[e,t]:[e];return ke(yield r._send("alchemy_simulateAssetChangesBundle",n,"simulateAssetChangesBundle"))}))}simulateAssetChanges(e,t){return M(this,void 0,void 0,(function*(){const r=yield this.config.getProvider(),n=void 0!==t?[e,t]:[e];return ke(yield r._send("alchemy_simulateAssetChanges",n,"simulateAssetChanges"))}))}simulateExecutionBundle(e,t){return M(this,void 0,void 0,(function*(){const r=yield this.config.getProvider(),n=void 0!==t?[e,t]:[e];return ke(r._send("alchemy_simulateExecutionBundle",n,"simulateExecutionBundle"))}))}simulateExecution(e,t){return M(this,void 0,void 0,(function*(){const r=yield this.config.getProvider(),n=void 0!==t?[e,t]:[e];return ke(r._send("alchemy_simulateExecution",n,"simulateExecution"))}))}getTransaction(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).getTransaction(e)}))}sendTransaction(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).sendTransaction(e)}))}estimateGas(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).estimateGas(e)}))}getMaxPriorityFeePerGas(){return M(this,void 0,void 0,(function*(){const e=yield this.config.getProvider();return le(yield e._send("eth_maxPriorityFeePerGas",[],"getMaxPriorityFeePerGas"))}))}waitForTransaction(e,t,r){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider()).waitForTransaction(e,t,r)}))}sendGasOptimizedTransaction(e,t){return M(this,void 0,void 0,(function*(){if(Array.isArray(e))return this._sendGasOptimizedTransaction(e,"sendGasOptimizedTransactionPreSigned");let r,n,o;const i=yield this.config.getProvider();try{r=yield this.estimateGas(e),n=yield this.getMaxPriorityFeePerGas();o=(yield i.getBlock("latest")).baseFeePerGas.toNumber()}catch(d){throw new Error(`Failed to estimate gas for transaction: ${d}`)}const s=function(e,t,r,n){return gt.map((o=>Object.assign(Object.assign({},e),{gasLimit:t,maxFeePerGas:Math.round(r*o+n*o),maxPriorityFeePerGas:Math.round(o*n)})))}(e,r.toNumber(),o,n),a=yield Promise.all(s.map((e=>t.signTransaction(e))));return this._sendGasOptimizedTransaction(a,"sendGasOptimizedTransactionGenerated")}))}getGasOptimizedTransactionStatus(e){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider())._send("alchemy_getGasOptimizedTransactionStatus",[e],"getGasOptimizedTransactionStatus")}))}_sendGasOptimizedTransaction(e,t){return M(this,void 0,void 0,(function*(){return(yield this.config.getProvider())._send("alchemy_sendGasOptimizedTransaction",[{rawTransactions:e}],t)}))}}const Et="alchemy-pending-transactions",mt="alchemy-mined-transactions",Tt=[Et,mt];class At extends class{constructor(e,t,r){this.listener=t,this.tag=e,this.once=r,this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter;default:return this.tag}}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");if("tx"!==e[0])throw new Error("Not a transaction event");return e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])throw new Error("Not a transaction event");const t=e[1],r=function(e){if(""===e)return[];return e.split(/&/g).map((e=>{if(""===e)return[];const t=e.split("|").map((e=>"null"===e?null:e));return 1===t.length?t[0]:t}))}(e[2]),n={};return r.length>0&&(n.topics=r),t&&"*"!==t&&(n.address=t),n}pollable(){return this.tag.indexOf(":")>=0||["block","network","pending","poll"].indexOf(this.tag)>=0}}{get fromAddress(){const e=this.tag.split(":");if(e[0]===Et)return e[1]&&"*"!==e[1]?Rt(e[1]):void 0}get toAddress(){const e=this.tag.split(":");if(e[0]===Et)return e[2]&&"*"!==e[2]?Rt(e[2]):void 0}get hashesOnly(){const e=this.tag.split(":");if(Tt.includes(e[0]))return e[3]&&"*"!==e[3]?"true"===e[3]:void 0}get includeRemoved(){const e=this.tag.split(":");if(e[0]===mt)return e[2]&&"*"!==e[2]?"true"===e[2]:void 0}get addresses(){const e=this.tag.split(":");if(e[0]===mt)return e[1]&&"*"!==e[1]?function(e){if(""===e)return;return e.split("|").map((e=>e.split(","))).map((e=>Object.assign(Object.assign({},"*"!==e[0]&&{to:e[0]}),"*"!==e[1]&&{from:e[1]})))}(e[1]):void 0}}function Nt(e){return"object"===typeof e&&"method"in e}function pt(e){if(!Nt(e))throw new Error("Event tag requires AlchemyEventType");if(e.method===m.PENDING_TRANSACTIONS)return function(e){const t=Ot(e.fromAddress),r=Ot(e.toAddress),n=kt(e.hashesOnly);return Et+":"+t+":"+r+":"+n}(e);if(e.method===m.MINED_TRANSACTIONS)return function(e){const t=function(e){if(void 0===e)return"*";return e.map((e=>Ot(e.to)+","+Ot(e.from))).join("|")}(e.addresses),r=kt(e.includeRemoved),n=kt(e.hashesOnly);return mt+":"+t+":"+r+":"+n}(e);throw new Error(`Unrecognized AlchemyFilterEvent: ${e}`)}function _t(e){if(!Object.values(m).includes(e.method))throw new Error(`Invalid method name ${e.method}. Accepted method names: ${Object.values(m)}`)}function Ot(e){return void 0===e?"*":Array.isArray(e)?e.join("|"):e}function kt(e){return void 0===e?"*":e.toString()}function Rt(e){if(""===e)return;const t=e.split("|");return 1===t.length?t[0]:t}class It{constructor(e){this.config=e}on(e,t){return(()=>{M(this,void 0,void 0,(function*(){const r=yield this.config.getWebSocketProvider(),n=yield this._resolveEnsAlchemyEvent(e);r.on(n,t)}))})(),this}once(e,t){return(()=>{M(this,void 0,void 0,(function*(){const r=yield this.config.getWebSocketProvider(),n=yield this._resolveEnsAlchemyEvent(e);r.once(n,t)}))})(),this}off(e,t){return(()=>{M(this,void 0,void 0,(function*(){const r=yield this.config.getWebSocketProvider(),n=yield this._resolveEnsAlchemyEvent(e);return r.off(n,t)}))})(),this}removeAllListeners(e){return(()=>{M(this,void 0,void 0,(function*(){const t=yield this.config.getWebSocketProvider(),r=e?yield this._resolveEnsAlchemyEvent(e):void 0;t.removeAllListeners(r)}))})(),this}listenerCount(e){return M(this,void 0,void 0,(function*(){const t=yield this.config.getWebSocketProvider(),r=e?yield this._resolveEnsAlchemyEvent(e):void 0;return t.listenerCount(r)}))}listeners(e){return M(this,void 0,void 0,(function*(){const t=yield this.config.getWebSocketProvider(),r=e?yield this._resolveEnsAlchemyEvent(e):void 0;return t.listeners(r)}))}_resolveEnsAlchemyEvent(e){return M(this,void 0,void 0,(function*(){if(!Nt(e))return e;if(e.method===m.MINED_TRANSACTIONS&&e.addresses){const t=[];for(const r of e.addresses)r.to&&(r.to=yield this._resolveNameOrError(r.to)),r.from&&(r.from=yield this._resolveNameOrError(r.from)),t.push(r);e.addresses=t}else e.method===m.PENDING_TRANSACTIONS&&(e.fromAddress&&("string"===typeof e.fromAddress?e.fromAddress=yield this._resolveNameOrError(e.fromAddress):e.fromAddress=yield Promise.all(e.fromAddress.map((e=>this._resolveNameOrError(e))))),e.toAddress&&("string"===typeof e.toAddress?e.toAddress=yield this._resolveNameOrError(e.toAddress):e.toAddress=yield Promise.all(e.toAddress.map((e=>this._resolveNameOrError(e))))));return e}))}_resolveNameOrError(e){return M(this,void 0,void 0,(function*(){const t=yield this.config.getProvider(),r=yield t.resolveName(e);if(null===r)throw new Error(`Unable to resolve the ENS address: ${e}`);return r}))}}class wt{constructor(e){this.config=new $(e),this.core=new Ce(this.config),this.nft=new dt(this.config),this.ws=new It(this.config),this.transact=new yt(this.config),this.notify=new ct(this.config),this.debug=new Pe(this.config)}}}}]);